<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æƒ…å ±ãƒ¢ãƒ©ãƒ«ç¢ºèªãƒ†ã‚¹ãƒˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutral Harmony -->
    <!-- Application Structure Plan: A single-page quiz application with a clear question display, multiple-choice answers, navigation buttons, and a final score summary. The structure guides the user sequentially through the quiz, providing immediate feedback. This linear flow is optimal for self-study quizzes. User information input fields (year, class, number, name) are added at the start and displayed on the results screen for personalization. -->
    <!-- Visualization & Content Choices: Questions and answers are presented as text. User interaction involves selecting an answer and navigating. There are no complex data visualizations as the core content is textual knowledge testing. Feedback is provided via dynamic text updates. User input fields are standard HTML form elements. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #334155; /* slate-700 */
        }
        .container {
            max-width: 768px; /* md:max-w-2xl */
        }
        .quiz-option {
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }
        .quiz-option.selected {
            background-color: #e0f2f7; /* teal-50 */
            border-color: #2dd4bf; /* teal-400 */
        }
        .quiz-option.correct {
            background-color: #d1fae5; /* green-100 */
            border-color: #34d399; /* green-400 */
        }
        .quiz-option.incorrect {
            background-color: #fee2e2; /* red-100 */
            border-color: #ef4444; /* red-500 */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="container mx-auto bg-white p-8 rounded-xl shadow-lg border border-slate-200">
        <h1 class="text-3xl md:text-4xl font-bold text-center mb-6 text-orange-600">æƒ…å ±ãƒ¢ãƒ©ãƒ«ç¢ºèªãƒ†ã‚¹ãƒˆ</h1>
        <p class="text-center text-slate-600 mb-8">SNSã®é©åˆ‡ãªåˆ©ç”¨ã«ã¤ã„ã¦ã€å­¦ã‚“ã ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ï¼</p>

        <!-- Start Section -->
        <div id="start-section" class="text-center">
            <h2 class="text-2xl font-bold mb-4 text-slate-700">å›ç­”è€…æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</h2>
            <div class="space-y-4 mb-8">
                <div class="flex items-center justify-center space-x-4">
                    <label for="student-year" class="font-medium">å¹´:</label>
                    <select id="student-year" class="p-2 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        <!-- Options will be populated by JS -->
                    </select>
                    <label for="student-class" class="font-medium">çµ„:</label>
                    <select id="student-class" class="p-2 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        <!-- Options will be populated by JS -->
                    </select>
                    <label for="student-number" class="font-medium">ç•ªå·:</label>
                    <select id="student-number" class="p-2 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500">
                        <!-- Options will be populated by JS -->
                    </select>
                </div>
                <div>
                    <label for="student-name" class="font-medium mb-2">æ°å:</label>
                    <input type="text" id="student-name" placeholder="æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" class="w-full max-w-xs p-2 border rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500">
                </div>
            </div>
            <button id="start-button" class="bg-teal-500 text-white px-8 py-4 rounded-xl text-xl font-bold hover:bg-teal-600 transition-colors shadow-lg">ã‚¯ã‚¤ã‚ºã‚’å§‹ã‚ã‚‹</button>
        </div>

        <!-- Quiz Section -->
        <div id="quiz-section" class="hidden">
            <div class="mb-6">
                <p id="question-text" class="text-xl font-semibold mb-4"></p>
                <div id="options-container" class="space-y-3">
                    <!-- Options will be injected here by JavaScript -->
                </div>
            </div>
            <div id="feedback-area" class="min-h-[40px] text-center mb-6">
                <p id="feedback-text" class="text-lg font-medium"></p>
            </div>
            <div class="flex justify-around">
                <button id="prev-button" class="bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-bold hover:bg-gray-400 transition-colors hidden">å‰ã®å•é¡Œ</button>
                <button id="next-button" class="bg-orange-500 text-white px-6 py-3 rounded-lg font-bold hover:bg-orange-600 transition-colors">æ¬¡ã®å•é¡Œ</button>
                <button id="submit-button" class="bg-teal-500 text-white px-6 py-3 rounded-lg font-bold hover:bg-teal-600 transition-colors hidden">çµæœã‚’è¦‹ã‚‹</button>
            </div>
        </div>

        <!-- Score Section -->
        <div id="score-section" class="hidden text-center">
            <h2 class="text-3xl font-bold mb-4 text-green-600">ã‚¯ã‚¤ã‚ºçµæœ</h2>
            <div class="mb-6 text-lg">
                <p>å›ç­”è€…æƒ…å ±:</p>
                <p id="result-info" class="font-medium"></p>
            </div>
            <p id="score-text" class="text-2xl mb-6">ã‚ãªãŸã®ç‚¹æ•°ã¯ <span>0</span> ç‚¹ã§ã—ãŸï¼</p>
            <p id="score-feedback" class="text-lg text-slate-700 mb-8"></p>
            <button id="restart-button" class="bg-orange-500 text-white px-6 py-3 rounded-lg font-bold hover:bg-orange-600 transition-colors">ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹</button>
        </div>
    </div>

    <script>
        // ã‚¯ã‚¤ã‚ºã®å•é¡Œãƒ‡ãƒ¼ã‚¿
        const questions = [
            {
                question: "SNSã§æ‚ªå£ã‚’æ›¸ã‹ã‚ŒãŸã‚Šã€å€‹äººæƒ…å ±ãŒå‹æ‰‹ã«æŠ•ç¨¿ã•ã‚ŒãŸã‚Šã™ã‚‹å•é¡Œã¯ã€ä½•ã®ãƒˆãƒ©ãƒ–ãƒ«ã«å½“ã¦ã¯ã¾ã‚Šã¾ã™ã‹ï¼Ÿ",
                options: ["ãƒãƒƒãƒˆã„ã˜ã‚", "ç‚ä¸Š", "ãªã‚Šã™ã¾ã—", "ãƒ•ã‚§ã‚¤ã‚¯ãƒ‹ãƒ¥ãƒ¼ã‚¹"],
                answer: 0
            },
            {
                question: "ã€ŒSNSåˆ©ç”¨ã®5ã¤ã®ãƒ«ãƒ¼ãƒ«ã€ã®ä¸€ã¤ã§ã€ã€ŒæŠ•ç¨¿ã™ã‚‹å‰ã«ã€‡ã€‡ã€‡ã€‡ï¼ã€ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚ã€‡ã€‡ã€‡ã€‡ã«å…¥ã‚‹è¨€è‘‰ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: ["æ¤œç´¢ã™ã‚‹", "è¨±å¯ã‚’ã‚‚ã‚‰ã†", "ç«‹ã¡æ­¢ã¾ã‚‹", "è©±é¡Œã«ã™ã‚‹"],
                answer: 2
            },
            {
                question: "SNSã§åºƒã¾ã£ã¦ã„ã‚‹æƒ…å ±ãŒæœ¬å½“ã‹ã©ã†ã‹ã‚’ç¢ºã‹ã‚ã‚‹ãŸã‚ã«ã€æœ€ã‚‚é‡è¦ãªè¡Œå‹•ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: ["ã™ãã«ãƒªãƒã‚¹ãƒˆï¼ˆã‚·ã‚§ã‚¢ï¼‰ã™ã‚‹", "å‹é”ã®æ„è¦‹ã‚’èã", "æƒ…å ±æºã‚’ç¢ºèªã™ã‚‹", "ç„¡è¦–ã™ã‚‹"],
                answer: 2
            },
            {
                question: "ã‚‚ã—è‡ªåˆ†ãŒSNSãƒˆãƒ©ãƒ–ãƒ«ã«å·»ãè¾¼ã¾ã‚Œã¦ã—ã¾ã£ãŸã‚‰ã€æœ€åˆã«èª°ã«ç›¸è«‡ã™ã‚‹ã®ãŒè‰¯ã„ã¨ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
                options: ["SNSã®é‹å–¶ä¼šç¤¾", "ä¿¡é ¼ã§ãã‚‹å¤§äººï¼ˆä¿è­·è€…ã‚„å…ˆç”Ÿï¼‰", "è­¦å¯Ÿ", "å‹é”"],
                answer: 1
            },
            {
                question: "SNSã«è‡ªåˆ†ã®ã€Œé¡”ãŒã¯ã£ãã‚Šå†™ã£ãŸå†™çœŸã€ã‚„ã€Œå®¶ãŒç‰¹å®šã§ãã‚‹èƒŒæ™¯ã®å†™çœŸã€ã‚’æŠ•ç¨¿ã™ã‚‹ã“ã¨ã®å±é™ºæ€§ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: ["ã„ã„ã­ãŒå°‘ãªã„å¯èƒ½æ€§ãŒã‚ã‚‹", "SNSç–²ã‚Œã®åŸå› ã«ãªã‚‹", "å€‹äººæƒ…å ±ãŒç‰¹å®šã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹", "å‹é”ãŒå«‰å¦¬ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹"],
                answer: 2
            },
            {
                question: "ã€ŒSNSåˆ©ç”¨ã®5ã¤ã®ãƒ«ãƒ¼ãƒ«ã€ã«ã‚ã‚‹ã€ŒSNSç–²ã‚Œã‚’æ„Ÿã˜ãŸã‚‰ä¼‘ã‚€ï¼ã€ãŒæŒ‡ã™è¡Œå‹•ã¯ä½•ã§ã™ã‹ï¼Ÿ",
                options: ["æ–°ã—ã„SNSã‚’æ¢ã™", "ãƒ‡ã‚¸ã‚¿ãƒ«ãƒ‡ãƒˆãƒƒã‚¯ã‚¹ã‚’ã™ã‚‹", "å‹é”ã¨SNSã«ã¤ã„ã¦è©±ã—åˆã†", "SNSã§æ„šç—´ã‚’æŠ•ç¨¿ã™ã‚‹"],
                answer: 1
            }
        ];

        // ã‚¯ã‚¤ã‚ºã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹å¤‰æ•°
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = new Array(questions.length).fill(null); // å„å•é¡Œã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠè‚¢ã‚’ä¿å­˜
        let studentInfo = {
            year: '',
            class: '',
            number: '',
            name: ''
        };

        // DOMè¦ç´ ã®å–å¾—
        const startButton = document.getElementById('start-button');
        const startSection = document.getElementById('start-section');
        const quizSection = document.getElementById('quiz-section');
        const scoreSection = document.getElementById('score-section');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackText = document.getElementById('feedback-text');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitButton = document.getElementById('submit-button');
        const scoreText = document.getElementById('score-text');
        const scoreFeedback = document.getElementById('score-feedback');
        const restartButton = document.getElementById('restart-button');

        // å›ç­”è€…æƒ…å ±å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
        const studentYearSelect = document.getElementById('student-year');
        const studentClassSelect = document.getElementById('student-class');
        const studentNumberSelect = document.getElementById('student-number');
        const studentNameInput = document.getElementById('student-name');
        const resultInfo = document.getElementById('result-info');

        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        startButton.addEventListener('click', startQuiz);
        nextButton.addEventListener('click', showNextQuestion);
        prevButton.addEventListener('click', showPreviousQuestion);
        submitButton.addEventListener('click', showResults);
        restartButton.addEventListener('click', restartQuiz);

        // å›ç­”è€…æƒ…å ±ã®ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
        function populateStudentInfoDropdowns() {
            // å¹´
            for (let i = 1; i <= 3; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                studentYearSelect.appendChild(option);
            }
            // çµ„
            for (let i = 1; i <= 10; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                studentClassSelect.appendChild(option);
            }
            // ç•ªå·
            for (let i = 1; i <= 40; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                studentNumberSelect.appendChild(option);
            }
        }

        // ã‚¯ã‚¤ã‚ºé–‹å§‹å‡¦ç†
        function startQuiz() {
            // å›ç­”è€…æƒ…å ±ã‚’å–å¾—
            studentInfo.year = studentYearSelect.value;
            studentInfo.class = studentClassSelect.value;
            studentInfo.number = studentNumberSelect.value;
            studentInfo.name = studentNameInput.value.trim();

            if (!studentInfo.name) {
                alert('æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            startSection.classList.add('hidden');
            quizSection.classList.remove('hidden');
            currentQuestionIndex = 0;
            score = 0;
            userAnswers.fill(null);
            loadQuestion();
            updateNavigationButtons();
        }

        // å•é¡Œã®è¡¨ç¤º
        function loadQuestion() {
            const questionData = questions[currentQuestionIndex];
            questionText.textContent = `Q${currentQuestionIndex + 1}. ${questionData.question}`;
            optionsContainer.innerHTML = '';
            feedbackText.textContent = ''; // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚¯ãƒªã‚¢

            questionData.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quiz-option', 'w-full', 'p-3', 'rounded-lg', 'border', 'border-slate-300', 'text-left', 'hover:bg-slate-100', 'focus:outline-none');
                button.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(button);

                // ä»¥å‰ã«é¸æŠã—ãŸå›ç­”ãŒã‚ã‚‹å ´åˆã€ãã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨
                if (userAnswers[currentQuestionIndex] !== null && userAnswers[currentQuestionIndex] === index) {
                    button.classList.add('selected');
                }
            });
            updateOptionStyles(false); // å•é¡Œãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
        }

        // é¸æŠè‚¢ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã®å‡¦ç†
        function selectOption(selectedIndex) {
            userAnswers[currentQuestionIndex] = selectedIndex;

            // å³åº§ã«ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–°
            Array.from(optionsContainer.children).forEach((button, index) => {
                button.classList.remove('selected', 'correct', 'incorrect');
                if (index === selectedIndex) {
                    button.classList.add('selected');
                }
            });

            checkAnswer(selectedIndex); // å›ç­”ã®æ­£èª¤ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¡¨ç¤º
        }

        // å›ç­”ã®æ­£èª¤ãƒã‚§ãƒƒã‚¯ã¨ã‚¹ã‚¿ã‚¤ãƒ«æ›´æ–°
        function checkAnswer(selectedIndex) {
            const questionData = questions[currentQuestionIndex];
            const correctIndex = questionData.answer;
            feedbackText.classList.remove('text-green-600', 'text-red-600');

            if (selectedIndex === correctIndex) {
                feedbackText.textContent = 'æ­£è§£ã§ã™ï¼';
                feedbackText.classList.add('text-green-600');
            } else {
                feedbackText.textContent = 'ä¸æ­£è§£ã§ã™ã€‚';
                feedbackText.classList.add('text-red-600');
            }
            updateOptionStyles(true); // æ­£èª¤ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¡¨ç¤º
        }

        // é¸æŠè‚¢ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateOptionStyles(showFeedback) {
            const questionData = questions[currentQuestionIndex];
            const correctIndex = questionData.answer;
            const selectedIndex = userAnswers[currentQuestionIndex];

            Array.from(optionsContainer.children).forEach((button, index) => {
                button.classList.remove('selected', 'correct', 'incorrect');
                if (showFeedback) { // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤ºæ™‚
                    if (index === correctIndex) {
                        button.classList.add('correct');
                    } else if (index === selectedIndex) {
                        button.classList.add('incorrect');
                    }
                } else { // é€šå¸¸æ™‚ï¼ˆå•é¡Œãƒ­ãƒ¼ãƒ‰æ™‚ï¼‰
                    if (index === selectedIndex) {
                         button.classList.add('selected');
                    }
                }
                button.disabled = showFeedback; // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯è¡¨ç¤ºå¾Œã¯ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            });
        }

        // æ¬¡ã®å•é¡Œã¸é€²ã‚€
        function showNextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
                updateNavigationButtons();
            } else {
                // æœ€å¾Œã®å•é¡Œã§ã€Œæ¬¡ã®å•é¡Œã€ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆã€çµæœè¡¨ç¤ºã¸
                showResults();
            }
        }

        // å‰ã®å•é¡Œã¸æˆ»ã‚‹
        function showPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
                updateNavigationButtons();
            }
        }

        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’æ›´æ–°
        function updateNavigationButtons() {
            //prevButton.classList.toggle('hidden', currentQuestionIndex === 0);
            nextButton.classList.toggle('hidden', currentQuestionIndex === questions.length - 1);
            submitButton.classList.toggle('hidden', currentQuestionIndex !== questions.length - 1);
            
            // å•é¡Œã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹éš›ã«é¸æŠè‚¢ã‚’æœ‰åŠ¹ã«ã—ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ã‚¯ãƒªã‚¢
            Array.from(optionsContainer.children).forEach(button => {
                button.disabled = false;
            });
            feedbackText.textContent = '';
        }

        // æœ€çµ‚ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°
        function calculateScore() {
            let finalScore = 0;
            questions.forEach((q, index) => {
                if (userAnswers[index] === q.answer) {
                    finalScore++;
                }
            });
            return finalScore;
        }

        // çµæœç”»é¢ã®è¡¨ç¤º
        function showResults() {
            scoreSection.classList.remove('hidden');
            quizSection.classList.add('hidden');
            
            score = calculateScore();
            scoreText.querySelector('span').textContent = `${score}/${questions.length}`;

            // å›ç­”è€…æƒ…å ±ã‚’è¡¨ç¤º
            resultInfo.textContent = `${studentInfo.year}å¹´ ${studentInfo.class}çµ„ ${studentInfo.number}ç•ª ${studentInfo.name}ã•ã‚“`;

            let feedbackMessage = '';
            scoreFeedback.classList.remove('text-green-700', 'text-orange-700', 'text-red-700');

            if (score === questions.length) {
                feedbackMessage = 'æº€ç‚¹ã§ã™ï¼ç´ æ™´ã‚‰ã—ã„ï¼âœ¨';
                scoreFeedback.classList.add('text-green-700');
            } else if (score >= questions.length / 2) {
                feedbackMessage = 'ã‚ˆãã§ãã¾ã—ãŸï¼ã‚‚ã†å°‘ã—ã§æº€ç‚¹ã§ã™ï¼ğŸ‘';
                scoreFeedback.classList.add('text-orange-700');
            } else {
                feedbackMessage = 'ã‚‚ã†ä¸€åº¦ã€æˆæ¥­å†…å®¹ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼ğŸ“š';
                scoreFeedback.classList.add('text-red-700');
            }
            scoreFeedback.textContent = feedbackMessage;
        }

        // ã‚¯ã‚¤ã‚ºã‚’ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ
        function restartQuiz() {
            scoreSection.classList.add('hidden');
            startSection.classList.remove('hidden'); // é–‹å§‹ç”»é¢ã«æˆ»ã‚‹
            // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ãƒªã‚»ãƒƒãƒˆ
            studentYearSelect.value = 1;
            studentClassSelect.value = 1;
            studentNumberSelect.value = 1;
            studentNameInput.value = '';
        }

        // ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ã‚’ç”Ÿæˆ
        window.onload = populateStudentInfoDropdowns;
    </script>
</body>
</html>
